<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Buzzer by JesseTG</title>
    <script>
    var context = new(window.AudioContext || window.webkitAudioContext)();
    var request = new XMLHttpRequest();
    var buzzer;
    var source;

    request.open('GET', "audio/buzzer.mp3", true);
    request.responseType = 'arraybuffer';

    request.onload = function() {
        context.decodeAudioData(request.response, function(buffer) {
            buzzer = buffer;
        }, function(error) {
            alert(error);
        });
    }
    request.send();

    function playBuzzer() {
        if (!source) {
            source = context.createBufferSource();
            source.buffer = buzzer;
            source.loop = true;
            source.connect(context.destination);
            source.start();
        }
    }

    function stop() {
        if (source) {
            source.stop();
            source = null;
        }
    }
    </script>
</head>

<body onmouseup="stop()" onblur="stop()">
    <div id="container">
        <div class="inner">
            <header>
                <h1>Buzzer</h1>
                <h2>A simple in-browser buzzer for setting up quiz games quickly.</h2>
            </header>
            <div id="buzzer" onmousedown="playBuzzer()">
            </div>

            <footer>
                <span class="author">By <a href="https://github.com/JesseTG">Jesse Talavera-Greenberg</a></span>
                <span class="source">View the source code on <a href="https://github.com/JesseTG/Buzzer">GitHub</a></span>
            </footer>
        </div>
    </div>
</body>


</html>
